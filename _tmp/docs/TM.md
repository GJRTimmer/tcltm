# Tcl Module File Specification

## File Layout

<!-- language: lang-none -->

    -------------------
    |     LICENSE     |
    -------------------
    |     HEADER      |
    -------------------
    |    BOOTSTRAP    |
    -------------------
    |     SOURCE      |
    -------------------
    |      INIT       |
    -------------------
    | CTRL-Z (\u001A) |
    -------------------
    |   BINARY DATA   |
    -------------------

## License

When using `tcltm` to build a Tcl Module it will scan the provided directory. If a LICENSE file is found it will be included as the LICENSE for the module.

## Header

Generate header meta data. Meta data keys are within the format `KEY: VALUE`this can be used in the future to parse the meta information of a Tcl module.

### Header Specification

> TODO: Include Example

## Bootstrap

**Note: Same as [Init](#init) except this is executed `BEFORE` the included source**

Wihtin the `.tcltm` specification source code can be included within the `yaml` file by using the multiline indicator `|-`.
Also a script can be provided by specifiying a `*.tcl` file name.

This can be used for custom initialization code. Default `tcltm` will generate default init statements like `package vsatisfies ...`, `package require ...` and others.
When using `tcltm` arguments can be given to exclude this auto generated code, and the user can provide this within their own init code.
Or the init code can simply be used to run certain code before the actual source is parsed by the interpreter.

## Source

Include Tcl source code.

Source code lines which matches the following expressions are stripped from the source.
This only applies to included source, this is done because the `tcltm` generator will includes this
from the specification. This is however not applied to the initscript. The reason behind is that the initscript
is required to execute certain commands because of loaded libraries.

| Expression          | Reason                                                      |
| ------------------- | ----------------------------------------------------------- |
| ^package provide.\* | Package provide state is generated by `tcltm` specification |
| ^package require.\* | Package requirements are provided by `tcltm` specification  |

## Init

**Note: Same as [Bootstrap](#bootstrap) except this is executed `AFTER` the included source**

Wihtin the `.tcltm` specification source code can be included within the `yaml` file by using the multiline indicator `|-`.
Also a script can be provided by specifiying a `*.tcl` file name.

This can be used for custom initialization code. Default `tcltm` will generate default init statements like `package vsatisfies ...`, `package require ...` and others.
When using `tcltm` arguments can be given to exclude this auto generated code, and the user can provide this within their own init code.
Or the init code can simply be used to run certain code before the actual source is parsed by the interpreter.

## Binary Data

> TODO
